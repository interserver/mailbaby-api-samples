#' MailBaby Email Delivery and Management Service API
#'
#' **Send emails fast and with confidence through our easy to use [REST](https://en.wikipedia.org/wiki/Representational_state_transfer) API interface.** # Overview This is the API interface to the [Mail Baby](https//mail.baby/) Mail services provided by [InterServer](https://www.interserver.net). To use this service you must have an account with us at [my.interserver.net](https://my.interserver.net). # Authentication In order to use most of the API calls you must pass credentials from the [my.interserver.net](https://my.interserver.net/) site. We support several different authentication methods but the preferred method is to use the **API Key** which you can get from the [Account Security](https://my.interserver.net/account_security) page. 
#'
#' The version of the OpenAPI document: 1.1.0
#' Contact: support@interserver.net
#' Generated by: https://openapi-generator.tech
#'
#' @docType class
#' @title History operations
#' @description HistoryApi
#' @format An \code{R6Class} generator object
#' @field api_client Handles the client-server communication.
#'
#' @examples
#' \dontrun{
#' ####################  GetStats  ####################
#'
#' library(openapi)
#' var_time <- "time_example" # character | The timeframe for the statistics. (Optional)
#'
#' #Account usage statistics.
#' api_instance <- HistoryApi$new()
#'
#' # Configure API key authorization: apiKeyAuth
#' api_instance$api_client$api_keys["X-API-KEY"] <- Sys.getenv("API_KEY")
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$GetStats(time = var_timedata_file = "result.txt")
#' result <- api_instance$GetStats(time = var_time)
#' dput(result)
#'
#'
#' ####################  ViewMailLog  ####################
#'
#' library(openapi)
#' var_id <- 2604 # integer | The ID of your mail order this will be sent through. (Optional)
#' var_origin <- "1.2.3.4" # character | originating ip address sending mail (Optional)
#' var_mx <- "mx.google.com" # character | mx record mail was sent to (Optional)
#' var_from <- "me@sender.com" # character | from email address (Optional)
#' var_to <- "you@receiver.com" # character | to/destination email address (Optional)
#' var_subject <- "Support" # character | subject containing this string (Optional)
#' var_mailid <- "185997065c60008840" # character | mail id (Optional)
#' var_skip <- 0 # integer | number of records to skip for pagination (Optional)
#' var_limit <- 100 # integer | maximum number of records to return (Optional)
#' var_start_date <- 1641781008 # integer | earliest date to get emails in unix timestamp format (Optional)
#' var_end_date <- 1673317008 # integer | earliest date to get emails in unix timestamp format (Optional)
#' var_replyto <- "replyto_example" # character | Reply-To Email Address (Optional)
#' var_headerfrom <- "headerfrom_example" # character | Header From Email Address (Optional)
#' var_delivered <- "delivered_example" # character | Limiting the emails to wether or not they were delivered. (Optional)
#'
#' #displays the mail log
#' api_instance <- HistoryApi$new()
#'
#' # Configure API key authorization: apiKeyAuth
#' api_instance$api_client$api_keys["X-API-KEY"] <- Sys.getenv("API_KEY")
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$ViewMailLog(id = var_id, origin = var_origin, mx = var_mx, from = var_from, to = var_to, subject = var_subject, mailid = var_mailid, skip = var_skip, limit = var_limit, start_date = var_start_date, end_date = var_end_date, replyto = var_replyto, headerfrom = var_headerfrom, delivered = var_delivereddata_file = "result.txt")
#' result <- api_instance$ViewMailLog(id = var_id, origin = var_origin, mx = var_mx, from = var_from, to = var_to, subject = var_subject, mailid = var_mailid, skip = var_skip, limit = var_limit, start_date = var_start_date, end_date = var_end_date, replyto = var_replyto, headerfrom = var_headerfrom, delivered = var_delivered)
#' dput(result)
#'
#'
#' }
#' @importFrom R6 R6Class
#' @importFrom base64enc base64encode
#' @export
HistoryApi <- R6::R6Class(
  "HistoryApi",
  public = list(
    api_client = NULL,

    #' @description
    #' Initialize a new HistoryApi.
    #'
    #' @param api_client An instance of API client.
    initialize = function(api_client) {
      if (!missing(api_client)) {
        self$api_client <- api_client
      } else {
        self$api_client <- ApiClient$new()
      }
    },

    #' @description
    #' Account usage statistics.
    #'
    #' @param time (optional) The timeframe for the statistics.
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return MailStatsType
    GetStats = function(time = NULL, data_file = NULL, ...) {
      local_var_response <- self$GetStatsWithHttpInfo(time, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Account usage statistics.
    #'
    #' @param time (optional) The timeframe for the statistics.
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (MailStatsType) with additional information such as HTTP status code, headers
    GetStatsWithHttpInfo = function(time = NULL, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE


      if (!is.null(`time`) && !(`time` %in% c("all", "billing", "month", "7d", "24h", "1d", "1h"))) {
        stop("Invalid value for time when calling HistoryApi$GetStats. Must be [all, billing, month, 7d, 24h, 1d, 1h].")
      }
      query_params[["time"]] <- `time`

      local_var_url_path <- "/mail/stats"
      # API key authentication
      if ("X-API-KEY" %in% names(self$api_client$api_keys) && nchar(self$api_client$api_keys["X-API-KEY"]) > 0) {
        header_params["X-API-KEY"] <- paste(unlist(self$api_client$api_keys["X-API-KEY"]), collapse = "")
      }

      # The Accept request HTTP header
      local_var_accepts <- list("application/json")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "MailStatsType"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    },

    #' @description
    #' displays the mail log
    #'
    #' @param id (optional) The ID of your mail order this will be sent through.
    #' @param origin (optional) originating ip address sending mail
    #' @param mx (optional) mx record mail was sent to
    #' @param from (optional) from email address
    #' @param to (optional) to/destination email address
    #' @param subject (optional) subject containing this string
    #' @param mailid (optional) mail id
    #' @param skip (optional) number of records to skip for pagination (default value: 0)
    #' @param limit (optional) maximum number of records to return (default value: 100)
    #' @param start_date (optional) earliest date to get emails in unix timestamp format
    #' @param end_date (optional) earliest date to get emails in unix timestamp format
    #' @param replyto (optional) Reply-To Email Address
    #' @param headerfrom (optional) Header From Email Address
    #' @param delivered (optional) Limiting the emails to wether or not they were delivered.
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return MailLog
    ViewMailLog = function(id = NULL, origin = NULL, mx = NULL, from = NULL, to = NULL, subject = NULL, mailid = NULL, skip = 0, limit = 100, start_date = NULL, end_date = NULL, replyto = NULL, headerfrom = NULL, delivered = NULL, data_file = NULL, ...) {
      local_var_response <- self$ViewMailLogWithHttpInfo(id, origin, mx, from, to, subject, mailid, skip, limit, start_date, end_date, replyto, headerfrom, delivered, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' displays the mail log
    #'
    #' @param id (optional) The ID of your mail order this will be sent through.
    #' @param origin (optional) originating ip address sending mail
    #' @param mx (optional) mx record mail was sent to
    #' @param from (optional) from email address
    #' @param to (optional) to/destination email address
    #' @param subject (optional) subject containing this string
    #' @param mailid (optional) mail id
    #' @param skip (optional) number of records to skip for pagination (default value: 0)
    #' @param limit (optional) maximum number of records to return (default value: 100)
    #' @param start_date (optional) earliest date to get emails in unix timestamp format
    #' @param end_date (optional) earliest date to get emails in unix timestamp format
    #' @param replyto (optional) Reply-To Email Address
    #' @param headerfrom (optional) Header From Email Address
    #' @param delivered (optional) Limiting the emails to wether or not they were delivered.
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (MailLog) with additional information such as HTTP status code, headers
    ViewMailLogWithHttpInfo = function(id = NULL, origin = NULL, mx = NULL, from = NULL, to = NULL, subject = NULL, mailid = NULL, skip = 0, limit = 100, start_date = NULL, end_date = NULL, replyto = NULL, headerfrom = NULL, delivered = NULL, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE








      if (`skip` < 0) {
        stop("Invalid value for `skip` when calling HistoryApi$ViewMailLog, must be bigger than or equal to 0.")
      }

      if (`limit` > 10000) {
        stop("Invalid value for `limit` when calling HistoryApi$ViewMailLog, must be smaller than or equal to 10000.")
      }
      if (`limit` < 1) {
        stop("Invalid value for `limit` when calling HistoryApi$ViewMailLog, must be bigger than or equal to 1.")
      }

      if (`start_date` > 9999999999) {
        stop("Invalid value for `start_date` when calling HistoryApi$ViewMailLog, must be smaller than or equal to 9999999999.")
      }
      if (`start_date` < 0) {
        stop("Invalid value for `start_date` when calling HistoryApi$ViewMailLog, must be bigger than or equal to 0.")
      }

      if (`end_date` > 9999999999) {
        stop("Invalid value for `end_date` when calling HistoryApi$ViewMailLog, must be smaller than or equal to 9999999999.")
      }
      if (`end_date` < 0) {
        stop("Invalid value for `end_date` when calling HistoryApi$ViewMailLog, must be bigger than or equal to 0.")
      }




      query_params[["id"]] <- `id`

      query_params[["origin"]] <- `origin`

      query_params[["mx"]] <- `mx`

      query_params[["from"]] <- `from`

      query_params[["to"]] <- `to`

      query_params[["subject"]] <- `subject`

      query_params[["mailid"]] <- `mailid`

      query_params[["skip"]] <- `skip`

      query_params[["limit"]] <- `limit`

      query_params[["startDate"]] <- `start_date`

      query_params[["endDate"]] <- `end_date`

      query_params[["replyto"]] <- `replyto`

      query_params[["headerfrom"]] <- `headerfrom`

      if (!is.null(`delivered`) && !(`delivered` %in% c("0", "1"))) {
        stop("Invalid value for delivered when calling HistoryApi$ViewMailLog. Must be [0, 1].")
      }
      query_params[["delivered"]] <- `delivered`

      local_var_url_path <- "/mail/log"
      # API key authentication
      if ("X-API-KEY" %in% names(self$api_client$api_keys) && nchar(self$api_client$api_keys["X-API-KEY"]) > 0) {
        header_params["X-API-KEY"] <- paste(unlist(self$api_client$api_keys["X-API-KEY"]), collapse = "")
      }

      # The Accept request HTTP header
      local_var_accepts <- list("application/json")

      # The Content-Type representation header
      local_var_content_types <- list()

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "GET",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "MailLog"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    }
  )
)
