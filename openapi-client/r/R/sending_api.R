#' MailBaby Email Delivery and Management Service API
#'
#' **Send emails fast and with confidence through our easy to use [REST](https://en.wikipedia.org/wiki/Representational_state_transfer) API interface.** # Overview This is the API interface to the [Mail Baby](https//mail.baby/) Mail services provided by [InterServer](https://www.interserver.net). To use this service you must have an account with us at [my.interserver.net](https://my.interserver.net). # Authentication In order to use most of the API calls you must pass credentials from the [my.interserver.net](https://my.interserver.net/) site. We support several different authentication methods but the preferred method is to use the **API Key** which you can get from the [Account Security](https://my.interserver.net/account_security) page. 
#'
#' The version of the OpenAPI document: 1.3.0
#' Contact: support@interserver.net
#' Generated by: https://openapi-generator.tech
#'
#' @docType class
#' @title Sending operations
#' @description SendingApi
#' @format An \code{R6Class} generator object
#' @field api_client Handles the client-server communication.
#'
#' @examples
#' \dontrun{
#' ####################  RawMail  ####################
#'
#' library(openapi)
#' var_raw_mail <- RawMail$new("raw_email_example") # RawMail | 
#'
#' #Sends a raw email
#' api_instance <- SendingApi$new()
#'
#' # Configure API key authorization: apiKeyAuth
#' api_instance$api_client$api_keys["X-API-KEY"] <- Sys.getenv("API_KEY")
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$RawMail(var_raw_maildata_file = "result.txt")
#' result <- api_instance$RawMail(var_raw_mail)
#' dput(result)
#'
#'
#' ####################  SendAdvMail  ####################
#'
#' library(openapi)
#' var_subject <- "subject_example" # character | The subject or title of the email
#' var_body <- "body_example" # character | The main email contents.
#' var_from <- EmailAddressTypes$new("email_example", "name_example") # EmailAddressTypes | 
#' var_to <- EmailAddressesTypes$new() # EmailAddressesTypes | 
#' var_replyto <- EmailAddressesTypes$new() # EmailAddressesTypes |  (Optional)
#' var_cc <- EmailAddressesTypes$new() # EmailAddressesTypes |  (Optional)
#' var_bcc <- EmailAddressesTypes$new() # EmailAddressesTypes |  (Optional)
#' var_attachments <- c(MailAttachment$new("filename_example", "data_example")) # array[MailAttachment] | (optional) File attachments to include in the email.  The file contents must be base64 encoded! (Optional)
#' var_id <- 56 # integer | (optional)  ID of the Mail order within our system to use as the Mail Account. (Optional)
#'
#' #Sends an Email with Advanced Options
#' api_instance <- SendingApi$new()
#'
#' # Configure API key authorization: apiKeyAuth
#' api_instance$api_client$api_keys["X-API-KEY"] <- Sys.getenv("API_KEY")
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$SendAdvMail(var_subject, var_body, var_from, var_to, replyto = var_replyto, cc = var_cc, bcc = var_bcc, attachments = var_attachments, id = var_iddata_file = "result.txt")
#' result <- api_instance$SendAdvMail(var_subject, var_body, var_from, var_to, replyto = var_replyto, cc = var_cc, bcc = var_bcc, attachments = var_attachments, id = var_id)
#' dput(result)
#'
#'
#' ####################  SendMail  ####################
#'
#' library(openapi)
#' var_to <- "to_example" # character | The Contact whom is the primary recipient of this email.
#' var_from <- "from_example" # character | The contact whom is the this email is from.
#' var_subject <- "subject_example" # character | The subject or title of the email
#' var_body <- "body_example" # character | The main email contents.
#'
#' #Sends an Email
#' api_instance <- SendingApi$new()
#'
#' # Configure API key authorization: apiKeyAuth
#' api_instance$api_client$api_keys["X-API-KEY"] <- Sys.getenv("API_KEY")
#'
#' # to save the result into a file, simply add the optional `data_file` parameter, e.g.
#' # result <- api_instance$SendMail(var_to, var_from, var_subject, var_bodydata_file = "result.txt")
#' result <- api_instance$SendMail(var_to, var_from, var_subject, var_body)
#' dput(result)
#'
#'
#' }
#' @importFrom R6 R6Class
#' @importFrom base64enc base64encode
#' @export
SendingApi <- R6::R6Class(
  "SendingApi",
  public = list(
    api_client = NULL,

    #' @description
    #' Initialize a new SendingApi.
    #'
    #' @param api_client An instance of API client.
    initialize = function(api_client) {
      if (!missing(api_client)) {
        self$api_client <- api_client
      } else {
        self$api_client <- ApiClient$new()
      }
    },

    #' @description
    #' Sends a raw email
    #'
    #' @param raw_mail 
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return GenericResponse
    RawMail = function(raw_mail, data_file = NULL, ...) {
      local_var_response <- self$RawMailWithHttpInfo(raw_mail, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Sends a raw email
    #'
    #' @param raw_mail 
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (GenericResponse) with additional information such as HTTP status code, headers
    RawMailWithHttpInfo = function(raw_mail, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      if (missing(`raw_mail`)) {
        stop("Missing required parameter `raw_mail`.")
      }

      if (!missing(`raw_mail`) && is.null(`raw_mail`)) {
        stop("Invalid value for `raw_mail` when calling SendingApi$RawMail, `raw_mail` is not nullable")
      }

      if (!is.null(`raw_mail`)) {
        local_var_body <- `raw_mail`$toJSONString()
      } else {
        local_var_body <- NULL
      }

      local_var_url_path <- "/mail/rawsend"
      # API key authentication
      if ("X-API-KEY" %in% names(self$api_client$api_keys) && nchar(self$api_client$api_keys["X-API-KEY"]) > 0) {
        header_params["X-API-KEY"] <- paste(unlist(self$api_client$api_keys["X-API-KEY"]), collapse = "")
      }

      # The Accept request HTTP header
      local_var_accepts <- list("application/json")

      # The Content-Type representation header
      local_var_content_types <- list("application/json", "multipart/form-data")

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "POST",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "GenericResponse"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    },

    #' @description
    #' Sends an Email with Advanced Options
    #'
    #' @param subject The subject or title of the email
    #' @param body The main email contents.
    #' @param from 
    #' @param to 
    #' @param replyto (optional) No description
    #' @param cc (optional) No description
    #' @param bcc (optional) No description
    #' @param attachments (optional) (optional) File attachments to include in the email.  The file contents must be base64 encoded!
    #' @param id (optional) (optional)  ID of the Mail order within our system to use as the Mail Account.
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return GenericResponse
    SendAdvMail = function(subject, body, from, to, replyto = NULL, cc = NULL, bcc = NULL, attachments = NULL, id = NULL, data_file = NULL, ...) {
      local_var_response <- self$SendAdvMailWithHttpInfo(subject, body, from, to, replyto, cc, bcc, attachments, id, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Sends an Email with Advanced Options
    #'
    #' @param subject The subject or title of the email
    #' @param body The main email contents.
    #' @param from 
    #' @param to 
    #' @param replyto (optional) No description
    #' @param cc (optional) No description
    #' @param bcc (optional) No description
    #' @param attachments (optional) (optional) File attachments to include in the email.  The file contents must be base64 encoded!
    #' @param id (optional) (optional)  ID of the Mail order within our system to use as the Mail Account.
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (GenericResponse) with additional information such as HTTP status code, headers
    SendAdvMailWithHttpInfo = function(subject, body, from, to, replyto = NULL, cc = NULL, bcc = NULL, attachments = NULL, id = NULL, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      if (missing(`subject`)) {
        stop("Missing required parameter `subject`.")
      }

      if (missing(`body`)) {
        stop("Missing required parameter `body`.")
      }

      if (missing(`from`)) {
        stop("Missing required parameter `from`.")
      }

      if (missing(`to`)) {
        stop("Missing required parameter `to`.")
      }

      if (!missing(`subject`) && is.null(`subject`)) {
        stop("Invalid value for `subject` when calling SendingApi$SendAdvMail, `subject` is not nullable")
      }

      if (!missing(`body`) && is.null(`body`)) {
        stop("Invalid value for `body` when calling SendingApi$SendAdvMail, `body` is not nullable")
      }

      if (!missing(`from`) && is.null(`from`)) {
        stop("Invalid value for `from` when calling SendingApi$SendAdvMail, `from` is not nullable")
      }

      if (!missing(`to`) && is.null(`to`)) {
        stop("Invalid value for `to` when calling SendingApi$SendAdvMail, `to` is not nullable")
      }

      if (!missing(`replyto`) && is.null(`replyto`)) {
        stop("Invalid value for `replyto` when calling SendingApi$SendAdvMail, `replyto` is not nullable")
      }

      if (!missing(`cc`) && is.null(`cc`)) {
        stop("Invalid value for `cc` when calling SendingApi$SendAdvMail, `cc` is not nullable")
      }

      if (!missing(`bcc`) && is.null(`bcc`)) {
        stop("Invalid value for `bcc` when calling SendingApi$SendAdvMail, `bcc` is not nullable")
      }

      if (!missing(`attachments`) && is.null(`attachments`)) {
        stop("Invalid value for `attachments` when calling SendingApi$SendAdvMail, `attachments` is not nullable")
      }

      if (!missing(`id`) && is.null(`id`)) {
        stop("Invalid value for `id` when calling SendingApi$SendAdvMail, `id` is not nullable")
      }

      form_params["subject"] <- `subject`
      form_params["body"] <- `body`
      form_params["from"] <- `from`
      form_params["to"] <- `to`
      form_params["replyto"] <- `replyto`
      form_params["cc"] <- `cc`
      form_params["bcc"] <- `bcc`
      form_params["attachments"] <- `attachments`
      form_params["id"] <- `id`
      local_var_url_path <- "/mail/advsend"
      # API key authentication
      if ("X-API-KEY" %in% names(self$api_client$api_keys) && nchar(self$api_client$api_keys["X-API-KEY"]) > 0) {
        header_params["X-API-KEY"] <- paste(unlist(self$api_client$api_keys["X-API-KEY"]), collapse = "")
      }

      # The Accept request HTTP header
      local_var_accepts <- list("application/json")

      # The Content-Type representation header
      local_var_content_types <- list("application/x-www-form-urlencoded", "application/json")

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "POST",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "GenericResponse"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    },

    #' @description
    #' Sends an Email
    #'
    #' @param to The Contact whom is the primary recipient of this email.
    #' @param from The contact whom is the this email is from.
    #' @param subject The subject or title of the email
    #' @param body The main email contents.
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return GenericResponse
    SendMail = function(to, from, subject, body, data_file = NULL, ...) {
      local_var_response <- self$SendMailWithHttpInfo(to, from, subject, body, data_file = data_file, ...)
      if (local_var_response$status_code >= 200 && local_var_response$status_code <= 299) {
        return(local_var_response$content)
      } else if (local_var_response$status_code >= 300 && local_var_response$status_code <= 399) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 400 && local_var_response$status_code <= 499) {
        return(local_var_response)
      } else if (local_var_response$status_code >= 500 && local_var_response$status_code <= 599) {
        return(local_var_response)
      }
    },

    #' @description
    #' Sends an Email
    #'
    #' @param to The Contact whom is the primary recipient of this email.
    #' @param from The contact whom is the this email is from.
    #' @param subject The subject or title of the email
    #' @param body The main email contents.
    #' @param data_file (optional) name of the data file to save the result
    #' @param ... Other optional arguments
    #'
    #' @return API response (GenericResponse) with additional information such as HTTP status code, headers
    SendMailWithHttpInfo = function(to, from, subject, body, data_file = NULL, ...) {
      args <- list(...)
      query_params <- list()
      header_params <- c()
      form_params <- list()
      file_params <- list()
      local_var_body <- NULL
      oauth_scopes <- NULL
      is_oauth <- FALSE

      if (missing(`to`)) {
        stop("Missing required parameter `to`.")
      }

      if (missing(`from`)) {
        stop("Missing required parameter `from`.")
      }

      if (missing(`subject`)) {
        stop("Missing required parameter `subject`.")
      }

      if (missing(`body`)) {
        stop("Missing required parameter `body`.")
      }

      if (!missing(`to`) && is.null(`to`)) {
        stop("Invalid value for `to` when calling SendingApi$SendMail, `to` is not nullable")
      }

      if (!missing(`from`) && is.null(`from`)) {
        stop("Invalid value for `from` when calling SendingApi$SendMail, `from` is not nullable")
      }

      if (!missing(`subject`) && is.null(`subject`)) {
        stop("Invalid value for `subject` when calling SendingApi$SendMail, `subject` is not nullable")
      }

      if (!missing(`body`) && is.null(`body`)) {
        stop("Invalid value for `body` when calling SendingApi$SendMail, `body` is not nullable")
      }

      form_params["to"] <- `to`
      form_params["from"] <- `from`
      form_params["subject"] <- `subject`
      form_params["body"] <- `body`
      local_var_url_path <- "/mail/send"
      # API key authentication
      if ("X-API-KEY" %in% names(self$api_client$api_keys) && nchar(self$api_client$api_keys["X-API-KEY"]) > 0) {
        header_params["X-API-KEY"] <- paste(unlist(self$api_client$api_keys["X-API-KEY"]), collapse = "")
      }

      # The Accept request HTTP header
      local_var_accepts <- list("application/json")

      # The Content-Type representation header
      local_var_content_types <- list("application/x-www-form-urlencoded", "application/json")

      local_var_resp <- self$api_client$CallApi(url = paste0(self$api_client$base_path, local_var_url_path),
                                 method = "POST",
                                 query_params = query_params,
                                 header_params = header_params,
                                 form_params = form_params,
                                 file_params = file_params,
                                 accepts = local_var_accepts,
                                 content_types = local_var_content_types,
                                 body = local_var_body,
                                 is_oauth = is_oauth,
                                 oauth_scopes = oauth_scopes,
                                 ...)

      if (local_var_resp$status_code >= 200 && local_var_resp$status_code <= 299) {
        # save response in a file
        if (!is.null(data_file)) {
          self$api_client$WriteFile(local_var_resp, data_file)
        }

        deserialized_resp_obj <- tryCatch(
          self$api_client$DeserializeResponse(local_var_resp, "GenericResponse"),
          error = function(e) {
            stop("Failed to deserialize response")
          }
        )
        local_var_resp$content <- deserialized_resp_obj
        return(local_var_resp)
      } 
      
      local_var_error_msg <- local_var_resp$response_as_text()      
      if (local_var_resp$status_code >= 300 && local_var_resp$status_code <= 399) {
        ApiResponse$new(paste("Server returned ", local_var_resp$status_code, " response status code."), local_var_resp)
      } else if (local_var_resp$status_code >= 400 && local_var_resp$status_code <= 499) {
        ApiResponse$new("API client error", local_var_resp)
      } else if (local_var_resp$status_code >= 500 && local_var_resp$status_code <= 599) {
        if (is.null(local_var_resp$response) || local_var_resp$response == "") {
          local_var_resp$response <- "API server error"
        }
        return(local_var_resp)
      }
    }
  )
)
